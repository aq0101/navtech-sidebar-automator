<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>NavTech Sidebar Automator</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <div class="app">

    <!-- ================= SIDEBAR ================= -->
    <aside class="sidebar">
      <div class="sidebar-brand">
        <img src="./assets/logo.png" alt="NavTech Logo" />
        <span>NavTech Sidebar Automator</span>
      </div>

      <nav class="nav">
        <div class="nav-item active" data-view="dashboard">Dashboard</div>
        <div class="nav-item" data-view="domains">Domains</div>
        <div class="nav-item" data-view="tools-edit">Tools</div>
        <div class="nav-item" data-view="settings">Settings</div>
      </nav>
    </aside>

    <!-- ================= MAIN ================= -->
    <div class="main">

      <!-- ================= DASHBOARD ================= -->
      <main class="dashboard view active" id="view-dashboard">
        <div class="section-header">
          <h2>Projects</h2>
          <div class="actions">
            <button id="createProjectBtn" class="primary-btn">Create</button>
            <button id="editProjectBtn" class="secondary-btn" disabled>Edit</button>
            <button id="duplicateProjectBtn" class="secondary-btn" disabled>Duplicate</button>
            <button id="deleteProjectBtn" class="danger-btn" disabled>Delete</button>
          </div>
        </div>

        <table class="project-table">
          <thead>
            <tr>
              <th></th>
              <th>Name</th>
              <th>Created</th>
              <th>Status</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </main>

      <!-- ================= PROJECT CONFIG ================= -->
      <main class="dashboard view hidden" id="view-project-config">
        <div class="project-config-header">
          <button id="backToDashboard" class="link-btn">Back to Projects</button>
          <div id="projectConfigTitle" class="project-config-title">Project</div>
          <button id="projectStartBtn" class="primary-btn" disabled>Start Project</button>
        </div>
          <div class="project-config-card">
           <h3>Mode</h3>
             <select id="modeSelect" class="project-config-input">
             <option value="normal">Normal (Auto)</option>
             <option value="sheet">Sheet (Manual)</option>
             </select>
             
              </div>
            <div class="project-config-card" id="sheetModeCard" style="display:none;">
              <h3>Sheet Mode</h3>

            <label>Domains (one per line, ordered)</label>
            <textarea id="sheetDomainsInput" class="project-config-input" rows="5"></textarea>

            <label>URLs (one per line, ordered)</label>
            <textarea id="sheetUrlsInput" class="project-config-input" rows="5"></textarea>

             <label>Keywords (one per line, ordered)</label>
             <textarea id="sheetKeywordsInput" class="project-config-input" rows="5"></textarea>

              <div class="project-config-help">
                One row = one sidebar. Order will be respected exactly.
               </div>
                </div>


        <div class="project-config-card">
          <h3>Domain Set</h3>
          <select id="domainSetSelect" class="project-config-input"></select>
                  </div>

        <div class="project-config-card">
          <h3>Keyword + URL Sets</h3>
          <div id="keywordSetsContainer" class="keyword-sets-wrapper">
            <div class="keyword-placeholder">
              No keyword sets yet. Add at least one set to continue.
            </div>
          </div>
          <button id="addKeywordSetBtn" class="secondary-btn" style="margin-top:12px;">
            + Add Set
          </button>
        </div>

        <div class="project-config-card">
          <h3>Target Links (Total)</h3>
          <input
            type="number"
            id="desiredLinksInput"
            min="1"
            placeholder="Auto"
            class="project-config-input"
          />
                  </div>

        <div class="project-config-card">
          <h3>Summary</h3>
          <div id="projectSummary" class="summary-box">
            Summary will update automatically
          </div>
        </div>
      </main>

      <!-- ================= PROJECT RUNNING ================= -->
      <main class="dashboard view hidden" id="view-project-running">
        <div class="run-header">

  <!-- LEFT BACK BUTTON -->
  <button
    id="backFromRun"
    class="link-btn"
    onclick="window.showView('view-dashboard')"
  >
    Back to Dashboard
  </button>

  <!-- CENTER PROJECT TITLE -->
  <div class="run-page-title" id="runProjectTitle">
    Project Name
  </div>

</div>


                  <div class="settings-card">

  <!-- ===== STATS ===== -->
  <div class="run-summary">
    <div class="stat">
      <span class="label">Total</span>
      <span class="value" id="statTotal">0</span>
    </div>

    <div class="stat">
      <span class="label">Processed</span>
      <span class="value" id="statProcessed">0</span>
    </div>

    <div class="stat success">
      <span class="label">Success</span>
      <span class="value" id="statSuccess">0</span>
    </div>

    <div class="stat failed">
      <span class="label">Failed</span>
      <span class="value" id="statFailed">0</span>
    </div>

    <div class="stat pending">
      <span class="label">Pending</span>
      <span class="value" id="statPending">0</span>
    </div>
  </div>

  <!-- ===== PROGRESS BAR ===== -->
  <div class="run-progress-wrapper">
    <div class="run-progress-top">
      <span id="runProgressText">Progress 0%</span>
      <span id="runProgressCount">0 / 0</span>
    </div>

    <div class="run-progress-bar">
      <div id="runProgressFill"></div>
    </div>
  </div>

  <!-- ===== FILTER + CENTER BUTTONS ROW ===== -->
  <div class="run-controls-row">

    <!-- LEFT: FILTER -->
    <select id="runFilter">
      <option value="all">All</option>
      <option value="pending">Pending</option>
      <option value="running">Running</option>
      <option value="success">Success</option>
      <option value="failed">Failed</option>
    </select>

    <!-- CENTER: BUTTONS -->
    <div class="actions run-actions">
      <button id="engineStartBtn" class="primary-btn">Start</button>
      <button id="stopProjectBtn" class="danger-btn">Stop</button>
      <button id="resumeProjectBtn" class="primary-btn">Resume</button>
      <button id="editConfigBtn" class="secondary-btn">Edit Config</button>
      <button id="retryFailedBtn" class="secondary-btn">Retry Failed</button>
      <button id="exportRunBtn" class="export-btn">Export XLSX</button>
    </div>

  </div>

  <!-- ===== TABLE ===== -->
  <table class="project-table">
    <thead>
      <tr>
        <th></th>
        <th>Domain</th>
        <th>URL</th>
        <th>Keyword</th>
        <th>Status</th>
        <th>Message</th>
      </tr>
    </thead>
    <tbody id="runTableBody"></tbody>
  </table>

</div>

                  </main>

      <!-- ================= DOMAINS ================= -->
      <main class="dashboard view" id="view-domains">
        <div id="domainSetsView">
          <div class="section-header">
            <h2>Domain Sets</h2>
            <button id="openAddSetModal" class="primary-btn">+ Add Domain Set</button>
          </div>
          <div id="setsGrid"></div>
        </div>

        <div id="domainEditorView" class="hidden">
          <button id="backToSets" class="link-btn">Back to Domain Sets</button>

          <div class="section-header">
            <h2 id="editorTitle"></h2>
            <button id="openDeleteSetModal" class="danger-btn">
              Delete Domain Set
            </button>
          </div>

          <div class="actions">
            <button id="showAddDomains" class="primary-btn">Add Domains</button>
            <button id="removeDomainsBtn" class="secondary-btn" disabled>
              Remove Selected
                 </button>

          </div>

          <div id="addDomainsPanel" class="hidden">
            <textarea
              id="bulkInput"
              placeholder="https://example.com|admin|app_pass"
            ></textarea>

            <div class="modal-actions">
              <button id="confirmAddDomains" class="primary-btn">Confirm Add</button>
              <button id="cancelAddDomains" class="secondary-btn">Cancel</button>
            </div>
          </div>

          <table class="project-table">
            <thead>
              <tr>
                <th></th>
                <th>Domain</th>
                <th>User</th>
                <th>Password</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="domainsTable"></tbody>
          </table>
        </div>
      </main>

      <!-- ================= SETTINGS ================= -->
      <main class="dashboard view" id="view-settings">
        <div class="settings-card">
          <h2>Execution Control</h2>
          <p class="settings-desc">
            Define exactly how the engine executes. No defaults. No automation.
          </p>

          <div class="form-grid">
            <div class="form-group">
              <label>Project Threads</label>
              <input type="number" id="projectThreads" min="1" />
            </div>
            <div class="form-group">
              <label>Domain Threads</label>
              <input type="number" id="domainThreads" min="1" />
            </div>
          </div>

          <div class="form-grid">
            <div class="form-group">
              <label>Delay (seconds)</label>
              <input type="number" id="delaySeconds" min="0" />
            </div>
            <div class="form-group">
              <label>Max Retries</label>
              <input type="number" id="maxRetries" min="0" />
            </div>
          </div>
        </div>

        <div class="settings-card">
          <h2>Proxy Manager</h2>
          <p class="settings-desc">
            Bulk input only. Format: <code>ip:port:user:pass</code>
          </p>

          <button id="openProxyModal" class="primary-btn">+ Add Proxies</button>

          <table class="project-table">
            <thead>
              <tr>
                <th></th>
                <th>IP</th>
                <th>Port</th>
                <th>User</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody id="proxyTable"></tbody>
          </table>

          <div class="actions">
            <button id="testProxyBtn" class="secondary-btn">Test Selected</button>
            <button id="removeProxyBtn" class="danger-btn">Remove Selected</button>
          </div>
        </div>

        <div class="settings-footer">
          <button id="saveSettings" class="primary-btn">Save Settings</button>
        </div>
      </main>
        <main class="view" id="view-tools-edit">

  <!-- PAGE TITLE -->
  <div class="section-header">
    <h2>Tools</h2>
  </div>

  <!-- TOOL SELECT -->
  <div class="project-config-card">
    <h3>Select Tool</h3>
    <select id="toolSelector">
      <option value="edit">Widget Editor</option>
      <option value="remove">Sidebar Remover</option>
    </select>
  </div>


  <!-- ================= EDIT TOOL ================= -->
  <div id="editToolContainer">

    <div class="section-header">
      <h2>Widget Editor</h2>
    </div>

    <div class="project-config-card">
      <h3>Select Domain Set</h3>
      <select id="editDomainSet"></select>
    </div>

    <!-- TOOLBAR -->
    <div class="actions tools-toolbar">
      <button id="addRowsBtn" class="tool-btn">Add 500 Rows</button>
      <button id="clearTableBtn" class="tool-btn">Clear Table</button>

      <button id="runEditBtn" class="primary-btn">Run</button>
      <button id="stopEditBtn" class="danger-btn">Stop</button>
      <button id="resumeEditBtn" class="secondary-btn">Resume</button>

      <button id="retryFailedBtn" class="secondary-btn">Retry Failed</button>
      <button id="removeRowBtn" class="secondary-btn">Remove</button>
      <button id="exportEditBtn" class="secondary-btn">Export</button>
    </div>

    <table class="project-table">
      <thead>
        <tr>
          <th style="width:40px;"></th>
          <th>Row</th>
          <th>Old Domain</th>
          <th>Old Keyword</th>
          <th>Old URL</th>
          <th>New Domain</th>
          <th>New Keyword</th>
          <th>New URL</th>
          <th>Status</th>
          <th>Message</th>
        </tr>
      </thead>
      <tbody id="editRunTable"></tbody>
    </table>
  </div>


  <!-- ================= REMOVE TOOL ================= -->
  <div id="removeToolContainer" style="display:none;">

    <div class="section-header">
      <h2>Sidebar Remover</h2>
    </div>

    <div class="project-config-card">
      <h3>Select Domain Set</h3>
      <select id="removeDomainSet"></select>
    </div>

    <div class="actions tools-toolbar">
      <button id="addRemoveRowsBtn" class="tool-btn">Add 500 Rows</button>
      <button id="clearRemoveTableBtn" class="tool-btn">Clear Table</button>

      <button id="runRemoveBtn" class="primary-btn">Run</button>
      <button id="stopRemoveBtn" class="danger-btn">Stop</button>
      <button id="resumeRemoveBtn" class="secondary-btn">Resume</button>

      <button id="retryRemoveFailedBtn" class="secondary-btn">Retry Failed</button>
      <button id="exportRemoveBtn" class="secondary-btn">Export</button>
    </div>

    <table class="project-table">
      <thead>
        <tr>
          <th>Row</th>
          <th>Domain</th>
          <th>Keyword</th>
          <th>URL</th>
          <th>Status</th>
          <th>Message</th>
        </tr>
      </thead>
      <tbody id="removeRunTable"></tbody>
    </table>

  </div>

</main>

    </div>
  </div>




  <!-- ================= MODALS ================= -->
  <div class="modal hidden" id="addSetModal">
    <div class="modal-box">
      <h3>Create Domain Set</h3>
      <input id="newSetName" placeholder="Domain Set Name" />
      <div class="modal-actions">
        <button id="createSetConfirm" class="primary-btn">Create</button>
        <button id="closeAddSetModal" class="secondary-btn">Cancel</button>

      </div>
    </div>
  </div>

  <div class="modal hidden" id="deleteSetModal">
    <div class="modal-box">
      <h3>Delete Domain Set</h3>
      <p>This will remove the set and all domains.</p>
      <div class="modal-actions">
        <button id="confirmDeleteSet" class="danger-btn">Delete</button>
        <button id="closeDeleteSetModal" class="secondary-btn">Cancel</button>
      </div>
    </div>
  </div>

  <div class="modal hidden" id="proxyModal">
    <div class="modal-box">
      <h3>Add Proxies</h3>
      <textarea
        id="proxyBulkInput"
        rows="6"
        placeholder="ip:port:user:pass"
      ></textarea>
      <div class="modal-actions">
        <button id="cancelProxy" class="secondary-btn">Cancel</button>
        <button id="confirmProxy" class="primary-btn">Add</button>
      </div>
    </div>
  </div>

  <div class="modal hidden" id="projectModal">
    <div class="modal-box">
      <h3>Create New Project</h3>
      <input id="projectNameInput" placeholder="Project name" />
      <div class="modal-actions">
        <button id="cancelProject" class="secondary-btn">Cancel</button>
        <button id="confirmProject" class="primary-btn">Create</button>
      </div>
    </div>
  </div>

  <div id="globalModal" class="modal hidden">
    <div class="modal-box">
      <h3></h3>
      <input type="text" />
      <div class="modal-actions">
        <button class="cancel-btn secondary-btn">Cancel</button>
        <button class="confirm-btn primary-btn">Confirm</button>
      </div>
    </div>
  </div>

  <!-- ================= SCRIPTS ================= -->
  <script src="navigation.js"></script>
  <script src="view-manager.js"></script>
  <script src="dashboard.js"></script>
  <script src="project-config.js"></script>
  <script src="project-running.js"></script>
  <script src="domains.js"></script>
  <script src="settings.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <script src="tools-edit.js"></script>
  <script src="tools-remove.js"></script>

  <script>
const toolSelector = document.getElementById("toolSelector");
const editBox = document.getElementById("editToolContainer");
const removeBox = document.getElementById("removeToolContainer");

if (toolSelector) {
  toolSelector.onchange = () => {
    if (toolSelector.value === "remove") {
      editBox.style.display = "none";
      removeBox.style.display = "block";
    } else {
      removeBox.style.display = "none";
      editBox.style.display = "block";
    }
  };
}
</script>


  <div id="toast" class="toast hidden"></div>
</body>
</html>
